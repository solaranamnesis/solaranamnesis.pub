function renderBooks(){const t=document.getElementById("loading-indicator"),e=document.getElementById("book-list");e.innerHTML="",fetch("books.json").then((t=>t.json())).then((n=>{if(n&&n.length>0){function l(t){e.innerHTML="",t.sort(((t,e)=>t.year.match(/\d+/)[0]>e.year.match(/\d+/)[0]?1:e.year.match(/\d+/)[0]>t.year.match(/\d+/)[0]?-1:0)).forEach((t=>{const n=document.createElement("li");n.className="box",n.innerHTML=`\n\t\t\t\t\t\t<strong>\n\t\t\t\t\t\t\t<a href="https://cdn.solaranamnesis.com/library-test/examples/book_shelf.html#${t.id}">${t.title}</a>\n\t\t\t\t\t\t</strong> â€” ${t.author} (${t.year}) \t\t\n\t\t\t\t\t\t<br>\n\t\t\t\t\t\t\t<small>\n\t\t\t\t\t\t\t\t<b>Languages:</b> ${t.languages}\n\t\t\t\t\t\t\t</small>\n\t\t\t\t\t\t\t<br>\n\t\t\t\t\t\t\t\t<small>\n\t\t\t\t\t\t\t\t\t<b>Subjects:</b> ${t.subjects}\n\t\t\t\t\t\t\t\t</small>\n            `,e.appendChild(n)}))}function o(t,e,n){return n.indexOf(t)===e}function c(){const t=document.getElementById("language-select").value,e=document.getElementById("year-select").value,o=document.getElementById("subject-select").value,c=document.getElementById("collection-select").value,a=document.getElementById("author-select").value;l(n.filter((n=>{const l="Select Language"===t||n.languages.includes(t),s="Select Year"===e||n.year.includes(e),r="Select Subject"===o||n.subjects.includes(o),d="Select Collection"===c||n.collections.includes(c),u="Select Author"===a||n.author.includes(a);return l&&s&&r&&u&&d})))}function a(t,e){const n=document.getElementById(t);e.forEach((t=>{const e=document.createElement("option");e.value=t,e.textContent=t,n.appendChild(e)}))}t.style.display="none";const s=n.flatMap((t=>t.languages.split(",").map((t=>t.trim())))).filter(o).sort(),r=n.map((t=>t.year.match(/\d+/)[0])).filter(o).sort(),d=n.flatMap((t=>t.subjects.split(",").map((t=>t.trim())))).filter(o).sort(),u=n.flatMap((t=>t.collections.split(";").map((t=>t.trim())))).filter(o).sort(),i=n.flatMap((t=>t.author.split(",").map((t=>t.trim())))).filter(o).sort();a("language-select",s),a("year-select",r),a("subject-select",d),a("collection-select",u),a("author-select",i),l(n),document.getElementById("language-select").addEventListener("change",c),document.getElementById("year-select").addEventListener("change",c),document.getElementById("collection-select").addEventListener("change",c),document.getElementById("subject-select").addEventListener("change",c),document.getElementById("author-select").addEventListener("change",c)}else console.log("books not found, retrying the request to fetch books json in 1 second..."),setTimeout(renderBooks,1e3)})).catch((t=>{console.error("Error:",t)}))}document.addEventListener("DOMContentLoaded",renderBooks);
